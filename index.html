<!--
##########################################################################################################################
#  OMDb Lookup Widget                                                                                                    #
#                                                                                                                        #
#  Client-facing HTML for widget                                                                                         #
#                                                                                                                        #
#  Written by Camden Boren 7/27/2023                                                                                     #
#                                                                                                                        #
#  This Source Code Form is subject to the terms of the Mozilla Public License, v. 2.0. If a copy of the MPL was not     #
#  distributed with this file, You can obtain one at https://mozilla.org/MPL/2.0/.                                       #
##########################################################################################################################
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <script>
    var apiKey = secrets.API_KEY;

    function inputs() {
        let title = document.getElementById("searchTitle").value;
        let year = document.getElementById("searchYear").value;
        lookup(title,year);
    }

    async function lookup(title, year) {
        let url = 'http://www.omdbapi.com/?apikey=' + apiKey + '&t=' + title + '&y=' + year;
        let response = await fetch(url);
        let results = await response.json();
        outputs(results);
    }

    function outputs(results) {
        document.getElementById("title").innerHTML = "Title: " + results["Title"];
        document.getElementById("year").innerHTML = "Year: " + results["Year"];
        document.getElementById("director").innerHTML = "Director: " + results["Director"];
        document.getElementById("runtime").innerHTML = "Runtime: " + results["Runtime"];
        document.getElementById("ratings").innerHTML = "Ratings: " + results.Ratings[0].Value + ", " + results.Ratings[2].Value;
    }
    </script>
    <title>OMDb Lookup</title>
</head>
<body>
    <h1>OMDb Lookup</h1>
    <label for = "searchTitle">Title:</label>
    <input type = "text" id = "searchTitle" name = "searchTitle"
        minlength = "1" maxlength= "100" size = "10">
    <label for = "searchYear">Year:</label>
    <input type = "text" id = "searchYear" name = "searchYear"
        minlength = "1" maxlength= "100" size = "10">
    <input type = "button" value = "Search" onclick = "inputs()">
    <p id = "title"></p>
    <p id = "year"></p>
    <p id = "director"></p>
    <p id = "runtime"></p>
    <p id = "ratings"></p>
</body>
</html>